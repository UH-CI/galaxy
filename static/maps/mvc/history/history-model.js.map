{"version":3,"file":"history-model.js","sources":["../../../src/mvc/history/history-model.js"],"names":["define","HISTORY_CONTENTS","UTILS","BASE_MVC","History","Backbone","Model","extend","LoggableMixin","mixin","SearchableModelMixin","defaults","model_class","id","name","state","diskSize","deleted","urlRoot","galaxy_config","root","initialize","historyJSON","contentsJSON","options","this","logger","log","contents","HistoryContents","historyId","get","_setUpListeners","updateTimeoutId","on","model","xhr","msg","details","errorHandler","listenTo","trigger","apply","concat","jQuery","makeArray","arguments","newId","clearUpdateTimeout","nice_size","bytesToString","toJSON","_","prototype","call","key","ownedByCurrUser","Galaxy","currUser","isAnonymous","contentsCount","reduce","values","memo","num","searchAttributes","searchAliases","title","tag","checkForUpdates","onReadyCallback","running","length","setUpdateTimeout","isFunction","delay","UPDATE_DELAY","history","setTimeout","refresh","clearTimeout","detailIds","data","join","fetch","done","_delete","when","save","purge","purged","undelete","copy","current","undefined","Error","postData","history_id","post","then","response","newHistory","setAsCurrent","getJSON","toString","getHistoryData","getHistory","ajax","isEmpty","historyData","empty","getContents","detailIdsFn","hdcaDetailIds","dataset_details","dataset_collection_details","df","Deferred","historyFn","contentsFn","historyXHR","json","notify","status","fail","reject","contentsXHR","resolve","HistoryCollection","Collection","window","models","includeDeleted","setUpListeners","collection","debug","remove","original","newData","unshift","create","hdas","historyOptions"],"mappings":"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"}